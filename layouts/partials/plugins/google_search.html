<!--
Create your own custom google search [here](https://www.google.com/cse/create/new).
Once done, to get this plugin working you'll need to:
	* Go to "Control Panel" and then "Search engine ID" and Copy the ID
	* Set the `google_search` within 'data/profiles.toml' under the section
		you want this applied to (or 'default' to apply site-wide). 
You can also create a second widget with a dark theme, and set the id to 
	'google_search_dark'.
-->
{{ $site := .Site.Data.config.site }}
{{ $section := or (index .Site.Data.config (or .Section (or .Data.Singular (.Title|lower)))) .Params }}
{{ $profiles := or (index .Site.Data.profiles $section.name) .Site.Data.profiles.site }}
{{ $theme := (index .Site.Data.addons (or .Params.theme (or $section.theme $site.theme))).theme }}

{{ $id := or (and $theme.is_dark (or $.Params.profiles.google_search_dark $profiles.google_search_dark)) (or .Params.profiles.google_search $profiles.google_search) }}


{{ with $id }}
<script>
  (function() {
    var cx = '{{ . }}';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
{{ end }}


<style>
	#___gcse_0 { margin:0px 0px 15px; }
	.gsc-control-cse {
		background-color:white !important;
		border-color:rgba(0,0,0,.2) !important;
		padding:5px 15px 5px 15px !important;
		border-radius:3px !important;
	}
	.gsc-search-box { margin:0px !important; }
	input[class="gsc-input"] { line-height:1; background-image:none !important; }
	td[class="gsc-search-button"] {
		padding:0px 15px !important;
		background-color:#3779b9 !important;
		border-color:#406f9d !important;
	}
	.gsc-search-button-v2 {
		height:13px !important; width:13px !important; padding:0px !important;
		background-color:transparent !important; border-color:transparent !important;
	}
	#gsc-i-id1 { background:transparent; color:white; }
</style>
